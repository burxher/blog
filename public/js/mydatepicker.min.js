/* eslint-disable no-undef */
/* eslint-disable no-extra-semi */
/* eslint-disable no-unused-vars */
var CONST_INPUT_ID=null;var DATE_PICKER_INNER="<div class='date-picker-title'>选择时间</div><div class='date-picker-input'><div class='input-item'><input type='text' value='00' id='picker-h' class='picker-hour' onkeydown='changeTime(this,23)' oninput='changeTime(this,23)' /><div class='time-btn'><i class='time-up' onclick='myDateTimeUp(0)'></i><i class='time-down' onclick='myDateTimeDown(0)'></i></div><label>时</label></div><div class='input-item'><input type='text' value='00' id='picker-m' class='picker-minute' onkeydown='changeTime(this,59)' oninput='changeTime(this,59)' /><div class='time-btn'><i class='time-up' onclick='myDateTimeUp(1)'></i><i class='time-down' onclick='myDateTimeDown(1)'></i></div><label>分</label></div></div><div class='date-picker-button'><button id='ok' onclick='datePickerOk()'>确定</button><button id='cancel' onclick='datePickerCancel()'>取消</button></div>";function changeTime(that,max){that.value=this.formatInput(that.value,max)}function datePickerCancel(){deleteMyDatePicker()}function datePickerOk(){var h=get_$("picker-h").value;var m=get_$("picker-m").value;var time=h+":"+m;CONST_INPUT_ID&&(get_$(CONST_INPUT_ID).value=time);deleteMyDatePicker();return time}function datePickerShow(id,_time){stopMao();CONST_INPUT_ID=id;var divHeight=160;var divWidth=250;deleteMyDatePicker();var div=document.createElement("div");div.setAttribute("id","my-date-picker");div.setAttribute("onclick","stopMao()");div.innerHTML=DATE_PICKER_INNER;var targetPosition=get_position(CONST_INPUT_ID);if(targetPosition.right<divWidth){div.style.right="1px"}else{div.style.left=targetPosition.left+"px"}div.style.top=(targetPosition.top>divHeight?(targetPosition.top-divHeight):targetPosition.bottom)+"px";document.body.appendChild(div);var time=CONST_INPUT_ID&&get_$(CONST_INPUT_ID).value||"00:00";get_$("picker-h").value=formatInput(time.split(":")[0],23);get_$("picker-m").value=formatInput(time.split(":")[1],59)}function myDateTimeUp(type){var v=timeCalculate(type);var _input=get_$(v.key);_input.value=formatInput(Number(_input.value)+v.num,v.max)}function myDateTimeDown(type){var v=timeCalculate(type);var _input=get_$(v.key);_input.value=formatInput(Number(_input.value)-v.num,v.max)}function timeCalculate(type){var constInput={"0":{key:"picker-h",num:1,max:23},"1":{key:"picker-m",num:5,max:59}};return constInput[type]}function formatInput(value,max){var reg=/^[0-9]*$/;if(!reg.test(value)||value<=0){return"00"}if(value>max){return max}var v=value&&value.toString();if(v.length<2){v="0"+v}else{if(v.length>2){if(v[0]=="0"){v=v.substring(1,v.length)}else{v=v.substring(0,v.length-1)}}}return v}function get_position(id){var bodyOffset={top:document.documentElement.scrollTop||document.body.scrollTop,left:document.documentElement.scrollLeft||document.body.scrollLeft};var targetOffset=get_$(id).getBoundingClientRect();return{top:bodyOffset.top+targetOffset.top,left:bodyOffset.left+targetOffset.left,bottom:targetOffset.bottom,right:document.body.clientWidth-targetOffset.right}}window.onclick=deleteMyDatePicker;function deleteMyDatePicker(){var div=get_$("my-date-picker");if(div){document.body.removeChild(div)}}function stopMao(){window.event?window.event.cancelBubble=true:e.stopPropagation()}function get_$(key,type){if(type=="class"){return document.getElementsByClassName(type)}return document.getElementById(key)};